(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-userinfo-userinfo"],{"046e":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"img-upload"},[a("v-uni-view",{staticClass:"img-upload",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.cameraTakePicture.apply(void 0,arguments)}}},[a("v-uni-image",{staticStyle:{width:"50px",height:"50px","border-radius":"50%"},attrs:{src:e.avatar}})],1)],1)},i=[]},"33e7":function(e,t,a){"use strict";a.r(t);var n=a("7f79"),i=a("f317");for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);a("b10e");var o=a("f0c5"),s=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,"30e52a52",null,!1,n["a"],void 0);t["default"]=s.exports},"3cfd":function(e,t,a){"use strict";a.r(t);var n=a("e1af"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t["default"]=i.a},"3ea9":function(e,t,a){var n=a("cbf4");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("4f06").default;i("e2ac1bc4",n,!0,{sourceMap:!1,shadowMode:!1})},"4c09":function(e,t,a){"use strict";a.r(t);var n=a("046e"),i=a("3cfd");for(var r in i)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(r);a("c71c");var o=a("f0c5"),s=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,"61280c0a",null,!1,n["a"],void 0);t["default"]=s.exports},"5ce0":function(e,t,a){"use strict";a("7a82");var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("c7eb")),r=n(a("1da1")),o=n(a("4c09")),s=a("1bcc"),u={components:{uploadAvatar:o.default},data:function(){return{userInfo:{},form:{}}},onLoad:function(){this.getuserInfo()},methods:{updateUserInfo:function(){var e=this;return(0,r.default)((0,i.default)().mark((function t(){var a;return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e.saveDbUrl),e.form.nickname=e.userInfo.nickname,e.saveDbUrl&&(e.form.avatar=e.saveDbUrl),t.next=5,(0,s.updateUserInfo)({method:"post",query:e.form});case 5:a=t.sent,200==a.code&&(uni.showToast({title:"修改成功",icon:"success"}),uni.switchTab({url:"/pages/user/user"}));case 7:case"end":return t.stop()}}),t)})))()},getImgUrl:function(e,t){this.saveDbUrl=e,this.userInfo.head_img=t},getuserInfo:function(){var e=this;return(0,r.default)((0,i.default)().mark((function t(){var a;return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,s.getuserInfo)({method:"post"});case 2:a=t.sent,console.log(a),200==a.code&&(e.userInfo=a.data.userInfo);case 5:case"end":return t.stop()}}),t)})))()}}};t.default=u},"7f79":function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return n}));var n={uniEasyinput:a("9d46").default,uniIcons:a("b4a7").default},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"container"},[a("v-uni-view",{staticClass:"info"},[a("v-uni-view",{staticClass:"info-item"},[a("v-uni-view",{staticClass:"item-left"},[e._v("昵称:")]),a("v-uni-view",{staticClass:"item-right"},[a("v-uni-view",[a("uni-easyinput",{attrs:{placeholder:"请输入昵称"},model:{value:e.userInfo.nickname,callback:function(t){e.$set(e.userInfo,"nickname",t)},expression:"userInfo.nickname"}})],1),a("v-uni-view",[a("uni-icons",{staticStyle:{color:"#8a8a8a","font-size":"14px"},attrs:{type:"forward"}})],1)],1)],1),a("v-uni-view",{staticClass:"info-item"},[a("v-uni-view",{staticClass:"item-left"},[e._v("头像:")]),a("v-uni-view",{staticClass:"item-right"},[a("v-uni-view",[a("uploadAvatar",{attrs:{avatar:e.userInfo.head_img},on:{getImgUrl:function(t){arguments[0]=t=e.$handleEvent(t),e.getImgUrl.apply(void 0,arguments)}}})],1),a("v-uni-view",[a("uni-icons",{staticStyle:{color:"#8a8a8a","font-size":"14px"},attrs:{type:"forward"}})],1)],1)],1)],1),a("v-uni-view",{staticClass:"info-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.updateUserInfo.apply(void 0,arguments)}}},[e._v("修改信息")])],1)},r=[]},"92bb":function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,".info-btn[data-v-30e52a52]{width:80%;margin:1rem auto 0;background-color:#43a431;border-radius:10px;height:45px;line-height:45px;color:#fff;text-align:center;font-size:16px}.item-right[data-v-30e52a52]{display:flex;align-items:center;font-size:14px;color:#8a8a8a}.avatar[data-v-30e52a52]{width:50px;height:50px;border-radius:50%}.item-left[data-v-30e52a52]{font-size:14px;color:#8a8a8a}.info-item[data-v-30e52a52]{display:flex;justify-content:space-between;border-bottom:1px solid #ebebeb;padding-bottom:15px;padding-top:15px}.container[data-v-30e52a52]{overflow:hidden}.info[data-v-30e52a52]{padding:10px;background-color:#fff;margin:.5rem auto 0;border-radius:5px}",""]),e.exports=t},9613:function(e,t,a){var n=a("92bb");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("4f06").default;i("d914d5e0",n,!0,{sourceMap:!1,shadowMode:!1})},b10e:function(e,t,a){"use strict";var n=a("9613"),i=a.n(n);i.a},c71c:function(e,t,a){"use strict";var n=a("3ea9"),i=a.n(n);i.a},cbf4:function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,".img-upload[data-v-61280c0a]{display:flex;align-items:center;justify-content:center;width:100%;height:100%;line-height:8px;border-radius:5px;position:relative}.upload-note[data-v-61280c0a]{font-size:12px;color:#969799;padding-top:10px}",""]),e.exports=t},e1af:function(e,t,a){"use strict";a("7a82");var n=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a("c7eb")),r=n(a("1da1")),o=a("1bcc"),s={name:"uploadAvatar",props:["avatar"],data:function(){return{imgShowUrl:this.avatar,saveDbUrl:""}},onLoad:function(){console.log(this.avatar)},methods:{test:function(){this.$emit("getImgUrl","http://localhost:99/Public/uploadfiles/images/test1.jpg","http://localhost:99/Public/uploadfiles/images/test1.jpg")},afterRead:function(){var e=this;return(0,r.default)((0,i.default)().mark((function t(){var a;return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,o.uploadBase64)({method:"POST",query:{base64_image_content:e.file}});case 2:a=t.sent,"200"==a.code?(e.imgShowUrl=a.data.imgShowUrl,e.saveDbUrl=a.data.saveDbUrl,e.$emit("getImgUrl",e.saveDbUrl,e.imgShowUrl)):Toast(a.msg);case 4:case"end":return t.stop()}}),t)})))()},cameraTakePicture:function(){navigator.camera.getPicture(this.onSuccess,this.onFail,{quality:50,destinationType:Camera.DestinationType.DATA_URL,encodingType:Camera.EncodingType.JPEG,sourceType:0})},onFail:function(e){},onSuccess:function(e){this.file="data:image/jpeg;base64,"+e,this.afterRead()}}};t.default=s},f317:function(e,t,a){"use strict";a.r(t);var n=a("5ce0"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t["default"]=i.a}}]);